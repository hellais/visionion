/*  
    documentation:
    http://en.wikipedia.org/wiki/JSON#Schema
    http://tools.ietf.org/html/draft-zyp-json-schema-03
    https://github.com/garycourt/JSV
    
    3.5.  JSON Schema primitive types
    JSON Schema defines seven primitive types for JSON values:
        array       A JSON array. 
        boolean     A JSON boolean. 
        integer     A JSON number without a fraction or exponent part. 
        number      Any JSON number. Number includes integer. 
        null        The JSON null value. 
        object      A JSON object. 
        string      A JSON string. 
 
*/


{
    "name": "Relay",
    "properties": {
        "_ID": {
            "type": "string",
            "title": "Identifier",
            "description": "Composed of date and fingerprint
                            in the form 'YYYYMMDDHH + "-" + fingerprint'.",
            "required": "true"
        },
        "nid": {
            "type": "string",
            "title": "Node ID",
            "description": "Just the fingerprint.",
            "required": "true"
        },
        "nick": {
            "type": "string",
            "title": "Nickname",
            "description": "Nickname of relay"
        },
        "date": {
            "type": "string",
            "title": "Date of dataset",
            "description": "Start of the time span that this dataset describes",
            "format" : "'YYYY-MM-DD HH' as defined in ISO-8601",
            "required": "true"
        },
        "span": {
            "type": "integer",
            "title": "Timespan",
            "description": "Duration of validity of this dataset, in hours.",
            "default": "1"
        },
        "type": {
            "type": "array",
            "title": "Type of relay",
            "description": "Possible values are: 
                            Bridge, Guard, Middle, Exit, Dir.",
            "items": {
                "type": "string"
            }
        },
        "flag": {
            "type": "array",
            "title": "Flags",
            "description": "Possible values are: 
                            Authority, BadExit, BadDirectory, Fast, Named, Stable, Running, 
                            Unnamed, Valid, V2Dir, V3Dir.",
            "items": {
                "type": "string"
            }
        },
        "bwa": {
            "type": "integer",
            "title": "Bandwidth advertized"
        },
        "bwc": {
            "type": "integer",
            "title": "Bandwidth consumed"
        },
        "tsv": {
            "type": "integer",
            "title": "Tor software version",
            "description": "Possible values are:
                            010,  011,  012,  020,  021,  022,  023,  024"
        },
        "os": {
            "type": "string",
            "title": "Operating system version."
        },
        "osn": {
            "type": "string",
            "title": "Operating system version, normalized",
            "description": "Possible values are:
                            linux,  darwin,  freebsd,  windows,  other"
        },
        "cwf": {
            "type": "number",
            "title": "Consensus weight fraction."
        },
        "pg": {
            "type": "number",
            "title": "Guard probability",
            "description": "Probability of a relay to be Guard node."
        },
        "pm": {
            "type": "number",
            "title": "Middle probablity",
            "description": "Probability of a relay to be Middle node."
        },
        "pe": {
            "type": "number",
            "title": "Exit probability",
            "description": "Probability of a relay to be Exit node."
        },
        "as": {
            "type": "string",
            "title": "Autonomous system",
            "description": "Autonomous system the node belongs to."
        },
        "pex": {
            "type": "array",
            "title": "Permitted exit ports",
            "description": "Port numbers of permitted exit ports."
            "items": {
                "type": "integer",
                }
        },
        "cc": {
            "type": "string",
            "title": "Country code",
            "description": "Country the node is located in.
                            Country codes as two-letter (ISO 3166-1 alpha-2, 
                            http://www.iso.org/iso/home/standards/country_codes.htm#2012_iso3166-2)"
        },
        "bag": {
            "type": "string",
            "title": "Bridge authority",
            "description": "Bridge adress given out by ...
                            One of the following values:
                            email,  https,  other"
        },
        "bez": {
            "type": "boolean",
            "title": "EZcloud Bridge",
            "description": "Bridge is located in EZcloud"
        },
        "bpt": {
            "type": "array",
            "title": "Pluggable Transports",
            "description": "Bridge supports the following pluggable transports",
            "items": {
                "type": "string",
                "description": "Among the possible values are
                                obfs2, obfs3"
                }
        }
    }
}



{
    "name": "Client",
    "properties": {
        "_ID": {
            "type": "string",
            "title": "Identifier",
            "description": "Composed of date and the string '-client'
                            in the form 'YYYYMMDDHH + "-client"'.",
            "required": "true"
        },
        "date": {
            "type": "string",
            "title": "Date of dataset",
            "description": "Start of the time span that this dataset describes",
            "format" : "'YYYY-MM-DD HH' as defined in ISO-8601",
            "required": "true"
        },
        "span": {
            "type": "integer",
            "title": "Timespan",
            "description": "Duration of validity of this dataset, in hours.",
            "default": "24"
        },
        "cb": {
            "type": "integer",
            "title": "Clients via bridges",
            "description": "Number of clients connecting via bridges"
        },
        "cbcc": {
            "type": "object",
            "title": "Clients via bridges by country",
            "description": "Number of clients connecting to Tor via bridges by country the client is located in.
                            Country codes as two-letter (ISO 3166-1 alpha-2, 
                            http://www.iso.org/iso/home/standards/country_codes.htm#2012_iso3166-2)"
            "properties": {
                "cc": {
                    "title": "Country code",
                    "type": "string"
                },
                "count": {
                    "title": "Count",
                    "type": "integer"
                }
            }
        },
        "cr": {
            "type": "integer",
            "title": "Clients via relays",
            "description": "Number of clients connecting via relays"
        },
        "crcc": {
            "type": "object",
            "title": "Clients via relays by country",
            "description": "Number of clients connecting to Tor via relays by country the client is located in.
                            Country codes as two-letter (ISO 3166-1 alpha-2, 
                            http://www.iso.org/iso/home/standards/country_codes.htm#2012_iso3166-2)"
            "properties": {
                "cc": {
                    "title": "Country code",
                    "type": "string"
                },
                "count": {
                    "title": "Count",
                    "type": "integer"
                }
            }
        },
        "uni": {
            "type": "integer",
            "title": "Unidirectional",
            "description": "Number of unidirectional connections"
        },
        "bi": {
            "type": "integer",
            "title": "Bidirectional",
            "description": "Number of bidirectional connections"
        },
        "cen": {
            "type": "integer",
            "title": "Censorships",
            "description": "Number of possible censorship events"
        },
        "dlf": {
            "type": "integer",
            "title": "Average Download",
            "description": "Average time to download files"
        },
        "fail": {
            "type": "integer",
            "title": "Timeouts and Failures",
            "description": "Number of timeouts and failures during file downloads"
        },
        "drq": {
            "type": "integer",
            "title": "Directory requests",
            "description": "Average time taken for answering directory request"
        },
        "ptu": {
            "type": "object",
            "title": "Pluggable transport used",
            "properties": {
                "pt": {
                    "title": "Pluggable transport",
                    "type": "string",
                    "description": "Expected values are 'obfs2', 'obfs3', '<OR>', '<??>'"
                },
                "count": {
                    "title": "Count",
                    "type": "integer"
                }
            }
        },
        "ipvu": {
            "type": "object",
            "title": "IP version used",
            "properties": {
                "ipv": {
                    "title": "IP version",
                    "type": "integer",
                    "description": "Expected values are '4', '6'"
                },
                "count": {
                    "title": "Count",
                    "type": "integer"
                }
            }
        },
        "frac": {
            "type": "integer",
            "title": "Grounding of estimates",
            "description": "The fraction of relays and bridges that contributed to the assessment of cbcc, crcc, ptu and ipvu"
        }
    }
}
